var d=Object.defineProperty;var c=(o,s,t)=>s in o?d(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var i=(o,s,t)=>(c(o,typeof s!="symbol"?s+"":s,t),t);import{C as l}from"./Canvas-92313062.js";import{d as f,r as x,f as p,g as u,o as w,c as v,a as y}from"./index-9f7a7fbc.js";class z extends l{constructor(t){super(t);i(this,"space",50);i(this,"speed",1);i(this,"fontSize",16);i(this,"status","draw");i(this,"digits",[]);i(this,"text",10);i(this,"opacity",10);this.draw()}draw(){this.context&&(this.clear(),this.resize(),this.reset(),this.initDigit(),this.loop())}reset(){this.digits=[]}redraw(){this.status="resize",this.draw()}initDigit(){const t=Math.floor(this.width/this.fontSize),e=Math.floor(this.height/this.fontSize),r=[];for(let n=0;n<t;n++){const h=[];for(let a=0;a<e;a++)h.push({x:n*this.fontSize+this.fontSize/2+this.fontSize,y:a*this.fontSize+this.fontSize/2,text:this.getRandomText(),opacity:0,index:a,speed:1});r.push({speed:1,index:0,length:e,list:h})}this.digits=r}loop(){this.status==="draw"?(this.clear(),this.drawDigit(),this.requestAnimation(()=>this.loop())):this.status==="resize"&&(this.status="draw")}drawDigit(){this.digits.forEach(t=>{t.list.forEach(e=>{e.opacity-e.speed>0&&(e.opacity-=e.speed),t.index===e.index&&(e.opacity=this.opacity,e.text=this.getRandomText()),this.drawText(e)}),t.index+t.speed>t.list.length?t.index=Math.floor(2*(Math.random()*this.opacity*2)-this.opacity*2):t.index+=t.speed})}drawText(t){this.context&&(this.context.font=`bold ${this.fontSize}px sans-serif`,this.context.textAlign="center",this.context.textBaseline="middle",this.context.shadowColor="rgba(0, 255, 0, 0.5)",this.context.shadowBlur=this.fontSize*2,this.context.fillStyle=`rgba(0, 255, 0, ${t.opacity/this.opacity})`,this.context.fillText(t.text,t.x,t.y))}getRandomText(){return Math.floor(Math.random()*this.text).toString()}}const _={class:"w-full h-full overflow-hidden"},m=y("canvas",{id:"rain-canvas",class:"w-full h-full bg-black"},null,-1),S=[m],T=f({__name:"rain",setup(o){const s=x(void 0);return p(()=>{s.value=new z({id:"rain-canvas"})||void 0,window.addEventListener("resize",()=>{var t;(t=s.value)==null||t.redraw()})}),u(()=>{var t;(t=s.value)==null||t.destroy(),window.removeEventListener("resize",()=>{var e;(e=s.value)==null||e.redraw()})}),(t,e)=>(w(),v("div",_,S))}});export{T as default};
