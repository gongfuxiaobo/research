var n=Object.defineProperty;var e=(s,t,h)=>t in s?n(s,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[t]=h;var i=(s,t,h)=>(e(s,typeof t!="symbol"?t+"":t,h),h);class r{constructor(t){i(this,"canvas");i(this,"context");i(this,"width",0);i(this,"height",0);i(this,"halfWidth",0);i(this,"halfHeight",0);i(this,"animation");i(this,"isSetOrigin",!1);var h;if(!t.id)throw new Error("画布ID不能为空");if(this.canvas=document.getElementById(t.id),!this.canvas)throw new Error("画布对象初始化失败");if(this.context=(h=this.canvas)==null?void 0:h.getContext("2d"),!this.context)throw new Error("画布上下文对象初始化失败");this.isSetOrigin=t.isSetOrigin}resize(){!this.canvas||!this.context||(this.width=window.innerWidth||0,this.height=window.innerHeight||0,this.halfWidth=this.width/2||0,this.halfHeight=this.height/2||0,this.canvas.width=this.width,this.canvas.height=this.height,this.setOrigin())}setOrigin(){!this.context||!this.isSetOrigin||(this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.translate(this.halfWidth,this.halfHeight))}clear(){this.context&&(this.isSetOrigin?this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height):this.context.clearRect(0,0,this.width,this.height))}requestAnimation(t){this.cancelAnimation(),this.animation=requestAnimationFrame(()=>t())}cancelAnimation(){this.animation&&(cancelAnimationFrame(this.animation),this.animation=void 0)}destroy(){this.cancelAnimation(),this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas=void 0,this.context=void 0)}}export{r as C};
