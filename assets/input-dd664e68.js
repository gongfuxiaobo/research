var l=Object.defineProperty;var c=(a,e,t)=>e in a?l(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var r=(a,e,t)=>(c(a,typeof e!="symbol"?e+"":e,t),t);import{C as x}from"./Canvas-92313062.js";import{d as f,r as w,f as u,g as p,o as y,c as k,a as v}from"./index-81f40cde.js";class _ extends x{constructor(t){super(t);r(this,"space",50);r(this,"speed",1);r(this,"fontSize",16);r(this,"text",["_"]);this.draw()}draw(){this.context&&(this.clear(),this.resize(),this.reset(),this.drawWrappedText())}reset(){}redraw(){this.draw()}drawWrappedText(){let t=0,s=this.fontSize/2;this.clear(),this.text.forEach(i=>{var d,h;const n=i==="/n",o=n?0:((h=(d=this.context)==null?void 0:d.measureText(i))==null?void 0:h.width)||0;(t+o>this.width||n)&&(t=0,s+=this.fontSize),n||(t+=o>this.fontSize/2?o:this.fontSize/2,this.drawText(i,t,s))})}drawText(t,s,i){this.context&&(this.context.font=`bold ${this.fontSize}px sans-serif`,this.context.textAlign="center",this.context.textBaseline="middle",this.context.shadowColor="rgba(0, 255, 0, 0.5)",this.context.shadowBlur=this.fontSize*2,this.context.fillStyle="rgba(0, 255, 0, 1)",this.context.fillText(t,s,i))}keyDown(t){if(t.key==="Backspace"){this.removeText(),this.drawWrappedText();return}if(t.key==="Enter"){this.addText("/n"),this.drawWrappedText();return}t.altKey||t.metaKey||t.ctrlKey||t.key.length>2||/^[A-Za-z0-9\s!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+$/.test(t.key)&&(this.addText(t.key),this.drawWrappedText())}addText(t){this.text.splice(this.text.length-1,0,t)}removeText(){this.text.length>1&&this.text.splice(this.text.length-2,1)}}const m={class:"w-full h-full overflow-hidden"},T=v("canvas",{id:"keyboard-canvas",class:"w-full h-full bg-black"},null,-1),z=[T],B=f({__name:"input",setup(a){const e=w(void 0);return u(()=>{e.value=new _({id:"keyboard-canvas"})||void 0,window.addEventListener("resize",()=>{var t;(t=e.value)==null||t.redraw()}),window.addEventListener("keydown",t=>{var s;(s=e.value)==null||s.keyDown(t)})}),p(()=>{var t;(t=e.value)==null||t.destroy(),window.removeEventListener("resize",()=>{var s;(s=e.value)==null||s.redraw()}),window.removeEventListener("keydown",s=>{var i;(i=e.value)==null||i.keyDown(s)})}),(t,s)=>(y(),k("div",m,z))}});export{B as default};
